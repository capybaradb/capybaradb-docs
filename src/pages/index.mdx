import LanguageToggle from "../components/LanguageToggle";
import LanguageContent from "../components/LanguageContent";
import { Callout } from "nextra/components";

<LanguageContent lang="python">

# Quick Start for Python

</LanguageContent>

<LanguageContent lang="typescript">

# Quick Start for TypeScript

</LanguageContent>

<LanguageToggle />

Welcome to **CapybaraDB**! The chillest AI-native database out there! This guide will help you get started quickly with our powerful API service. Whether you're inserting your first document or exploring advanced features, you'll find everything you need to make your first API request in just a few simple steps.

## Step 1: Install SDK

<LanguageContent lang="python">

```
pip install capybaradb
```

</LanguageContent>

<LanguageContent lang="typescript">

```
npm install capybaradb
```

</LanguageContent>

## Step 2: Sign Up

Start by signing up for **CapybaraDB**:

1. Visit [CapybaraDB Sign Up](https://capybaradb.co).
2. After signing up, log in and navigate to `/dashboard`, your main hub for managing databases, collections, and API keys.

## Step 3: Create an API Key

Next, create an API key to authenticate your project:

1. In the sidebar, go to the **API Key** page.
2. Click to create a new API key—you can optionally name the key.
3. The key will only be displayed once. **Store it securely**.

## Step 4: Create a Collection

To start storing your data, follow these steps to create a collection:

1. In the sidebar, click the **Collection** tab and use the **plus (+)** button to create a new collection.
2. Enter a **database name** and a **collection name**. Once created, the new collection will appear in the sidebar.
3. From the collection list in the sidebar, select the collection you just created.
4. Copy **Project ID** from the side bar and save it with the API key.

## Step 5: Use Your API Key and Project ID

To interact with CapybaraDB's API, you'll need a **collection URL** and your **API Key** for authorization.

### Setting the API Key and Project URL

For this quick start guide (non-production environment), directly assign your API key and project ID to variables:

```
CAPYBARA_API_KEY = "your_api_key"
CAPYBARA_PROJECT_ID = "your_project_id"
```

<Callout type="warning">

**Important:** Only hardcode credentials for local development.

In production, use environment variables or secure server-side logic for **API Key** and **Collection URL** to prevent unauthorized access and keep information secure.

</Callout>

<LanguageContent lang="python">

## Step 6: Make Your First API Request

### Example: Insert a Document

Use Python to insert a document into the collection:

```python
from capybaradb import CapybaraDB, EmbText
from dotenv import load_dotenv

load_dotenv()

one_client = CapybaraDB()
db = one_client.db('your_db_name')
collection = db.collection('your_collection_name')

# Define the document to be inserted
doc = {
    "name": "Alice",
    "age": "7",
    "background": EmbText("Through the Looking-Glass follows Alice as she steps into a fantastical world...")
}

# Make the POST request to insert the document
response = collection.insertOne(doc)
```

</LanguageContent>

<LanguageContent lang="typescript">

## Step 6: Make Your First API Request

### Example: Insert a Doc

Use TypeScript to insert a doc into the collection:

```typescript
import { CapybaraDB, EmbText } from "capybaradb";
import dotenv from "dotenv";

dotenv.config();

async function main() {
  const client = new CapybaraDB();
  const db = client.db("your_db_name");
  const collection = db.collection("your_collection_name");

  // Define the document to be inserted
  const doc = {
    name: "Alice",
    age: "7",
    background: new EmbText(
      "Through the Looking-Glass follows Alice as she steps into a fantastical world..."
    ),
  };

  try {
    // Insert the document
    const result = await collection.insertOne(doc);
    console.log("Document inserted successfully:", result);
  } catch (error) {
    console.error("Error inserting document:", error);
  }
}

main();
```

</LanguageContent>

<Callout type="info">

### EmbJSON - What Happens After Saving

When saving an `EmbText` data type, CapybaraDB performs additional processing:

- The saved data will have an updated field called `EmbText.chunks` in addition to `EmbText.text` and `EmbText.emb_model`.
- Each chunk is vectorized and indexed in the database, enabling efficient querying and similarity searches.

</Callout>

<LanguageContent lang="python">

## Step 7: Querying the Data

### Query Request

Here's how to perform a query using Python:

```python
query = Alice in a fantastical world

response = collection.query(query)
```

</LanguageContent>

<LanguageContent lang="typescript">
## Step 7: Querying the Data

### Query Request

Here's how to perform a query using TypeScript:

```typescript
async function main() {
  // Define the query
  const query = "Alice in a fantastical world";

  try {
    // Execute the query
    const response = await collection.query(query);
    console.log("Query results:", response);
  } catch (error) {
    console.error("Failed to query document:", error);
  }
}

main();
```

</LanguageContent>

### Example Response

Successful query response:

```json
{
  "matches": [
    {
      "document_id": { "$oid": "671bf91580bffb6387b4f3d2" },
      "path": "background",
      "chunk": "Through the Looking-Glass follows Alice as she steps into a fantastical world...",
      "chunk_n": 0,
      "score": 0.703643203
    }
  ]
}
```

---

Feel free to let me know if there’s anything specific you’d like to add or clarify further in this documentation!

## Security Recommendations

- **Do not hardcode your API Key in production environment**. Use environment variables or secure configuration tools.
- **Keep your API Key private** and do not share it publicly.

## Next Steps

- Experiment with more complex data types using CapybaraDB's extended JSON.
- Explore the full API documentation for more features.

If you have any questions, feel free to reach out to us at hello@capybaradb.co.

Happy building!
